{"version":3,"sources":["../src/videojs-shaka.js"],"names":["Html5","videojs","getComponent","ShakaTech","options","ready","source","shaka","polyfill","installAll","video","el","shakaPlayer","Player","addEventListener","e","options_","playerId","trigger","drm","configure","load","src","window","MediaSource","srcObj","type","registerTech","techOrder","unshift"],"mappings":";;;;;;;;;;AAAA;;;;;;;;;AASA,IAAMA,QAAQC,QAAQC,YAAR,CAAqB,OAArB,CAAd;;IAEMC,S;;;AAEF,uBAAYC,OAAZ,EAAqBC,KAArB,EAA4B;AAAA;;AAExB,YAAIC,SAASF,QAAQE,MAArB;AACA,eAAOF,QAAQE,MAAf;;AAHwB,0HAKlBF,OALkB,EAKTC,KALS;;AAOxBE,cAAMC,QAAN,CAAeC,UAAf;;AAEA,YAAIC,QAAQ,MAAKC,EAAL,EAAZ;;AAEA,cAAKC,WAAL,GAAmB,IAAIL,MAAMM,MAAV,CAAiBH,KAAjB,CAAnB;;AAEA,cAAKE,WAAL,CAAiBE,gBAAjB,CAAkC,OAAlC,EAA2C,UAACC,CAAD,EAAO;AAC9Cd,oBAAQ,MAAKe,QAAL,CAAcC,QAAtB,EAAgCC,OAAhC,CAAwC,OAAxC,EAAiDH,CAAjD;AACH,SAFD;;AAIA,YAAG,OAAOX,QAAQe,GAAf,IAAsB,WAAzB,EAAsC;;AAElC,kBAAKP,WAAL,CAAiBQ,SAAjB,CAA2B;AACvBD,qBAAKf,QAAQe;AADU,aAA3B;AAGH;;AAED,cAAKP,WAAL,CAAiBS,IAAjB,CAAsBf,OAAOgB,GAA7B;AAxBwB;AAyB3B;;;;sCAEoB;AACjB,mBAAO,CAAC,CAACC,OAAOC,WAAhB;AACH;;;sCAEoBC,M,EAAQ;AACzB,mBAAQA,OAAOC,IAAP,KAAgB,sBAAjB,GAA2C,OAA3C,GAAqD,EAA5D;AACH;;;;EAnCmB1B,K;;AAsCxBC,QAAQ0B,YAAR,CAAqB,OAArB,EAA8BxB,SAA9B;AACAF,QAAQG,OAAR,CAAgBwB,SAAhB,CAA0BC,OAA1B,CAAkC,OAAlC","file":"videojs-shaka.js","sourcesContent":["/**\n * videojs-shaka.js\n *\n * License can be found in the LICENSE file.\n *\n * @copyright 2016 halibegic\n * @author halibegic <hasan461@gmail.com>\n */\n\nconst Html5 = videojs.getComponent('Html5');\n\nclass ShakaTech extends Html5 {\n\n    constructor(options, ready) {\n\n        let source = options.source;\n        delete options.source;\n\n        super(options, ready);\n\n        shaka.polyfill.installAll();\n\n        let video = this.el();\n\n        this.shakaPlayer = new shaka.Player(video);\n\n        this.shakaPlayer.addEventListener('error', (e) => {\n            videojs(this.options_.playerId).trigger('error', e);\n        });\n\n        if(typeof options.drm != 'undefined') {\n            \n            this.shakaPlayer.configure({\n                drm: options.drm\n            });\n        }\n\n        this.shakaPlayer.load(source.src);\n    }\n\n    static isSupported() {\n        return !!window.MediaSource;\n    }\n\n    static canPlaySource(srcObj) {\n        return (srcObj.type === 'application/dash+xml') ? 'maybe' : '';\n    }\n}\n\nvideojs.registerTech('Shaka', ShakaTech);\nvideojs.options.techOrder.unshift('Shaka');\n"]}